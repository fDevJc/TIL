# SQL 튜닝 용어를 직관적으로 이해하기
- 과정
    - 사용자는 DB에서 원하는 데이터를 가져오고자 SQL문을 실행
    - 실행된 SQL 문은 MySQL 엔진에서 문법 에러가 있는지, DB에 존재하는 테이블 대상으로 SQL문을 작성했는지와 같은 세부 사항을 다양한 문법 및 구문으로 검사 (파싱 작업을 하는 Parser)
    - 이후 사용자가 요청한 데이터를 빠르고 효율적으로 찾아가는 전략적 계획을 수립 (옵티마이저 Optimizer)
    - 이 계획을 토대로 스토리지 엔진에 위치한 데이터까지 찾아간 뒤 해당 데이터를 MySQL 엔진으로 전달
- 스토리지 엔진
    - 사용자가 요청한 SQL 문을 토대로 DB에 저장된 디스크나 메모리에서 필요한 데이터를 가져오는 역할을 수행
    - 이후 해당 데이터를 MySQL 엔진으로 보냄
    - 스토리지 엔진이 데이터를 저장하는 방식에 따라 각각의 스토리지 엔진을 선택
    - 필요하다면 외부에서 스토리지 엔진 설치 가능
- MySQL 엔진
    - SQL 문법 검사
    - 적절한 오브젝트 활용 검사
    - SQL 문을 최소 단위로 분리하여 원하는 데이터를 빠르게 찾는 경로를 모색
- 과정
    - 사용자 SQL 실행
    - 파서는 최소단위로 구성요소를 분리하고 해당 구성요소를 트리로 만든다
        - 트리를 만드는 과정에서 문법 오류 검토
        - 트리의 최소 단위는 >, <, = 등의 기호나 SQL 키워드로 분리
        - 트리에 허용되지 않는 문법이 포함된다면 에러 발생
    - 전처리기는 생성된 트리 결과를 토대로, 유효성 검사(테이블명이 유효한지, 테이블과관련된 권한이 있는지)
    - 옵티마이저는 트리를 구성하는 오브젝트의 데이터를 효율적으로 가져오기 위해 효율적인 경로로 데이터를 검색하는 방법에 관한 실행계획을 수립
    - 엔진실행기는 이전에 수립된 실행 계획으로 스토리지 엔진을 호출
        - 이후 엔진실행기는 스토리지 엔진을 통해서 가져온 데이터중 불필요 데이터를 필터링
- 기본 키는 클러스터형 인덱스로 작동
    - 기본 키의 구성 열 순서를 기준으로 물리적인 스토리지에 데이터가 쌓인다
- 기본 키와 동일한 인덱스를 생성하는 것은 낭비
- 서브쿼리
    - 스칼라 서브쿼리 : select 절
    - 인라인 뷰 : from 절
    - 중첩 서브쿼리 : where 절
- 메인쿼리
- 상관서브쿼리, 비상관서브쿼리
- 드라이빙 테이블, 드리븐 테이블
    - 조인을 수행하는 과정에서 테이블에 접근하는 우선순위가 존재한다.
    - 이때 먼저 찾게 되는 테이블을 드라이빙 테이블, 후에 찾게 되는 테이블을 드리븐 테이블
- 조인 알고리즘
    - 중첩 루프 조인(nested loop join)
    - 블록 중첩 루프 조인(block nested loop join)
        - 조인 버퍼를 활용하여 중첩 루프 조인의 성능을 개선
    - 배치 키 액세스 조인(batched key access join)
    - 해시 조인
- 오브젝트 스캔 유형
    - 테이블 풀 스캔
    - 인덱스 범위 스캔
    - 인덱스 풀 스캔
    - 인덱스 고유 스캔
    - 인덱스 루스 스캔
    - 인덱스 병합 스캔
- 디스크 접근 방식
    - 시퀀셜 엑세스
    - 랜덤 엑세스
- 조건 유형
    - 액세스 조건
    - 필터 조건
- 응용 용어
    - 선택도(selectivity)
    - 카디널리티(cardinality)
- 콜레이션(collation)
    - 특정 문자셋
    - 캐틱터셋: 문자를 저장하는 방식
    - 콜레이션: 데이터 정렬을 어떻게 할것인지
- 히스토그램

---
- 옵티마이저
    - 전달된 파서 트리를 토대로 필요하지 않은 조건은 제거하거나 연산과정을 단순화
    - 어떤 순서로 테이블에 접근할지, 인덱스를 사용할지, 사용한다면 어떤 인덱스를 사용할지, 정렬할 때 인덱스를 사용할지 아니면 임시 테이블을 사용할지와 같은 실행 계획을 수립
    - 실행계획의 경우의 수가 많을 때는 모든 실행 계획을 판단하지 않음
        - 이는 옵티마이저의 실행계획이 항상 최상의 실행계획이 아닐 수 있다