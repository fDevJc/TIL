# OS 캐시와 분산
## 대규모 데이터를 효율적으로 처리하는 원리
### OS의 캐시 구조
- OS는 메모리를 이용해서 디스크 액세스를 줄인다.
- OS 캐시
- 가상메모리
    - 가상 메모리는 물리적인 하드웨어를 OS에서 추상화
    - 프로레스에서 메모리를 다루기 쉽게 하는 이점을 제공
    - 페이지: OS가 물리 메모리를 확보/관리하는 단위
- Linux의 페이지 캐시
    - 디스크의 내용을 일단 메모리에 읽어들인다.
        - 페이지가 작성
    - 작성된 페이지는 파기되지 않고 남는다.
        - 페이지 캐시
    - 예외의 경우를 제외하고 모든 I/O에 적용
        - 디스크의 캐시를 담당하는 곳(VFS)
- VFS
    - 디스크의 캐시는 페이지 캐시에 의해 제공되지만, 실제 이 디스크를 조작하는 디바이스 드라이버와 OS 사이에는 파일시스템이 끼어 있다. Linux에는 ext3, ext2, ext4, xfs 등 몇몇 파일 시스템이 있는데 그 하위에 디바이스 드라이버가 있으며, 이 디바이스 드라이버가 실제로 하드디스크 등을 조작한다.
    - 파일 시스템 위에는 VFS(Virtual File System)이라는 추상화 레이어가 있다.
    - 파일 시스템은 다양한 함수를 갖추고 있는데, 그 인터페이스를 통일하는 것이 VFS의 역할
    - VFS가 페이지 캐시의 구조를 지니고 있다.
- 리눅스는 페이지 단위를 디스크를 캐싱
- 단순히 DB의 대수만 늘려서는 확장성을 확보할 수 없다.
    - 캐싱할 수 없는 비율은 변함없음
- 페이지 캐시는 한 번의 리드에서 시작된다
    - 디비 서버는 웜업이 필요?
- 요청 패턴을 섬으로 분할
    - 요청에 따라 서비스를 다르게 태울수도있구나
    - 일반사용자, bot... 등