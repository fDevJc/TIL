# 3장.HTTP 메시지

HTTP 완벽가이드 책을 읽고 정리한 내용입니다.

---

HTTP가 인터넷의 배달원이라면, HTTP메시지는 무언가를 담아 보내느 소포와 같다.

## 3.1 메시지의 흐름

HTTP 메시지는 어플리케이션 간 주고받는 데이터의 블록이다.

이 메시지는 클라이언트, 서버, 프록시 사이를 흐른다.

### 3.1.1 메시지는 원 서버 방향을 인바운드로 하여 송신된다

HTTP는 인바운드와 아웃바운드라는 용어로 트랜잭션 방향을 표현한다.

인바운드는 메시지가 서버방향으로 흐르는 것이고, 아웃바운드는 클라이언트방향으로 흐르는 것을 뜻한다.

### 3.1.2 다운스트림으로 흐르는 메시지

HTTP 메시지는 요청 메시지냐, 응답 메시지냐에 관계없이 모두 다운스트림으로 흐른다.

메시지의 발송자는 수신자의 업스트림이다.

## 3.2 메시지의 각 부분

HTTP 메시지는 단순한, 데이터의 구조화된 블록이다.

메시지는 시작줄, 헤더 블록, 본문 세 부분으로 나뉘며 시작줄은 어떤 메시지인지, 헤더 블록은 속성, 본문은 데이터를 담는다.

시작줄과 헤더와는 달리 본문은 데이터를 포함할 수도 비어있을 수도 있다.

### 3.2.1 메시지 문법

HTTP 메시지는 요청메시지, 응답메시지로 나뉜다.

- 요청메시지 형식

```
<메서드> <요청URL> <버전>
<헤더>

<엔터티 본문>
```

- 응답메시지 형식

```
<버전> <상태 코드> <사유 구절>
<헤더>

<엔터티 본문>
```

- 메서드
    
    클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작이다
    
    GET, POST, DELETE 등
    
- 요청 URL
    
    리소스를 지정하는 완전한 URL 또는 URL의 경로 구성요소
    
- 버전
    
    사용중인 HTTP의 버전
    
- 상태코드
    
    요청 중 무엇이 일어났는지 설명하는 HTTP명세에 정의된 세 자리의 숫자
    
- 사유구절
    
    숫자로 구성된 상태코드의 의미를 사람이 이해할 수 있는 짧은 문구
    
- 헤더들
    
    헤더이름: 값CRLF (이름,콜론,공백,값,CRLF)로 구성된 0개 이상의 헤더들로 구성
    
- 엔터티 본문
    
    임의의 데이터 블록을 포함하며, 메시지는 본문이 없을 경우 CRLF로 끝나게 된다
    

### 3.2.2 시작줄

- 요청줄
- 응답줄
- 메서드
    
    많이 사용되는 HTTP 메서드
    
    - **GET**: 서버에서 리소스를 가져온다
    - **POST**: 서버가 처리해야 할 데이터를 보낸다
    - **PUT**: 서버가 요청 메시지의 본문을 저장한다
    - **DELETE**: 서버에서 문서를 제거한다
    - HEAD: 서버에서 리소스의 헤더만 가져온다
    - TRACE: 메시지가 프락시를 거쳐 서버에 도달하는 과정을 추적한다
    - OPTIONS: 서버가 어떤 메서드를 수행할 수 있는지 확인한다
    
    HTTP 메서드는 추가로 확장하여 사용할 수 있다. 확정 메서드라고 불린다.
    
- 상태코드
    
    상태 코드의 종류
    
    - 1xx: 정보
    - 2xx: 성공
    - 3xx: 리다이렉션
    - 4xx: 클라이언트 에러
    - 5xx: 서버 에러
- 사유구절
- 버전 번호

### 3.2.3 헤더

헤더필드는 메시지에 추가 정보를 더해준다. 헤더는 **이름: 값** 형태의 목록이다.

- 헤더분류
    - 일반헤더: 요청, 응답 메시지 모두 사용
    - 요청헤더: 요청메시지 부가 정보 제공
    - 응답헤더: 응답메시지 부가 정보 제공
    - Entity 헤더: 본문 크기, 컨텐츠, 리소스 그 자체를 서술
    - 확장헤더: 명세에 정의되지않은 새로운 헤더

### 3.2.4 엔터티 본문

HTTP 메시지의 화물(이미지, 비디오, 애플리케이션, 카드정보 등을 담은)이라고 할 수 있다.

## 3.3 메서드

### 3.3.1 안전한 메서드

GET, HEAD등을 안전하다고 할 수 있는데, 서버에 어떤 작용도 없음을 의미한다.

하지만 그건 웹 개발자에게 달려있다.

안전한 메서드의 목적은 서버에 어떤 영향을 줄 수 있는 안전하지 않은 메서드가 사용될 때 사용자 들에게 그 사실을 알려주는 HTTP 애플리케이션을 만들 수 있도록 하는 것에 있다.

### 3.3.2 GET

서버에서 필요한 리소스를 가져온다.

### 3.3.3 HEAD

get과 동일하게 행동하지만 서버는 응답으로 헤더만 돌려준다.

어떨때 사용할까?

1. 리소스를 가져오지 않고도 리소스에 대한 타입이나 길이등을 알 수 있다
2. 응답의 상태코드를 통해, 리소스가 존재하는지 알 수 있다.
3. 리소스의 변경을 감지 할 수 있다

🤔  캐싱, 서버의 상태를 모니터링 등에 사용되어질거 같네

### 3.3.4 PUT

서버가 요청의 본문을 가지고 요청 URL의 이름대로 새 문서를 만들거나, 교체 하는 것이다

### 3.3.5 POST

서버에 입력 데이터를 전송하기 위해 설계

### 3.3.6 TRACE

클아이언트와 서버사이의 프록시들을 추적할 수 있다.

### 3.3.7 OPTIONS

웹서버의 여러 가지 종류의 지원 범위에 대해 물어본다.

### 3.3.8 DELETE

서버에서 요청 URL로 지정한 리소스를 삭제 할 것을 요청한다.

## 3.4 상태코드

### 3.4.1 1xx: 정보성 상태코드

### 3.4.2 2xx: 성공 상태코드

### 3.4.3 3xx: 리다이렉션 상태코드

### 3.4.4 4xx: 클라이언트 에러 상태코드

### 3.4.5 5xx: 서버 에러 상태코드

## 3.5 헤더

### 3.5.1 일반헤더

### 3.5.2 요청헤더

### 3.5.3 응답헤더

### 3.5.4 엔터티 헤더

## 정리

헤더와 상태코드는 너무 많아서 따로 정리를 한번해야겠다.
