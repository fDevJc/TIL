# DB Optimizer

---

## What

- 옵티마이저는 가장 효율적인 실행계획을 찾아주는 DBMS의 핵심엔진
- 옵티마이저가 최적의 실행계획을 찾아주는 방법으로는 2가지 방법이잇다.
    - 규칙기반 최적화
        - 실행 속도가 빠른 순으로 규칙을 먼저 세워두고 우선순위가 앞서는 방법을 채택
    - 비용기반 최적화
        - 통계정보를 이용하여 실행계획을 세운 후 최소한의 비용이 발생한 실행계획을 채택
        - 통계정보
            - 테이블
                - 테이블 전체 로우 수, 테이블의 전체 블록 수, 행의 평균 길이 등
            - 컬럼
                - 컬럼 종류, NULL분포, 컬럼값 평균 길이, 데이터 분포 추정치 등
            - 인덱스
            - 시스템
    
    |  | 규칙기반 옵티마이저 | 비용기반 옵티마이저 |
    | --- | --- | --- |
    | 개념 | 사전에 정의된 규칙 기반 | 최소비용 계산 실행계획 수립 |
    | 기준 | 우선순위 규칙 | 액세스 비용 |
    | 인덱스 | 인덱스 존재 시 가장 우선 사용 | 비용에 의한 결정 |
    | 성능 | 사용자 SQL 작성 능력 | 옵티마이저 예측 능력 |
    | 장점 | 판단이 매우 규칙적이라 실행계획 예측 가능 | 통계정보를 활용한 현실요소 적용 가능 |
    | 단점 | 예측 통계정보 무시 | 최소 성능 보장의 실행계획 예측 제어 어려움 |

---

## Conclusion

- 옵티마이저를 절대적으로 신뢰할 수는 없다.
- 그러므로 실행계획을 보고 판단하며 적절한 힌트를 사용하여 쿼리 튜닝을 해야한다.

---

## Reference

- [https://coding-factory.tistory.com/743](https://coding-factory.tistory.com/743)
- RealMySQL
