## AWS 웨비나 정리

- Container Orchestrator가 필요한 이유?
    - Docker Swarm
    - Kubernetes
    - Mesos
- kubernetes가 필요한 이유
    - scheduling - 수 많은 서버 중 최적의 서버에 컨테이너 배포
    - self healing - 배포된 컨테이너에 문제가 생겼을 경우 자동으로 대응
    - load balancing - 서비스 트래픽을 배포된 컨테이너에 균등하게 분산
    - auto sacling - 서비스 제공을 위해 필요한 경우 자동으로 용량 증설
    - rolling update - 배포된 컨테이너 환경에 대한 업데이트
    - portability - 서로 다른 운영 환경에 대한 자유로운 이동
- 쿠버네티스의 목표
    - Current State
    - Desired State
- 쿠버네티스 클러스터
    - 마스터 노드, 워커 노드
    - API서버
        - 쿠버네티스 api를 노출하는 k8s 컨트롤 플랜의 컴포넌트
        - 사용자 요청의 유효성을 검증하고 요청을 처리
        - JSON 포맷의 요청을 받아서 API 오브젝트를 관리
        - etcd 클러스터에서 데이터를 검색하고 응답으로 제공
    - 컨트롤러 매니저
        - pod를 복제하거나 노드 운영 등 각 리소스를 제어하는 컨트롤러들을 감독하고 실행
        - 핵심 제어 루프를 포함하는 데몬
        - 서비스 운영에 필요한 다양한 컨트롤러를 통합
        - Deployment Controller, ReplicaSet Controller, Node Controller 등
    - Scheduler
        - Node가 할당되지 않은 새로운 pod를 감시
        - 새로운 pod가 실행될 최적의 node를 선택
        - pod가 실행 가능한 node를 찾은 다음 점수를 측정한 후 가장 높은 점수를 가진 node를 선택
        - 리소스 요구사항, 하드웨어, 소프트웨어 정책 제한조건, 어피니티 및 안티 어피니티 명세, 데이터 지역성(data locality) 등을 고려
    - etcd
        - 모든 클러스터 데이터를 담는 저장소로 사용되는 키-값 저장소.
        - 쿠버네티스의 필수 구성 요소
        - etcd는 분산형 합의 기반 시스템
        - 저장된 데이터의 백업 필수
    - kube-proxy
        - worker node에서 실행되는 네트워크 프록시
        - node의 네트워크 규칙을 유지 관리
        - 서비스와 endpoint에 대한 연결을 구성
        - os에서 제공하는 패킷 필터링 기능을 사용
        - DaemonSet 형태로 배포
    - kubelet
        - 클러스터 각 노드에서 실행되는 agent
        - kubelet은 pod에서 컨테이너가 동작하도록 관리
        - pod spec 기반으로 동작하는지 확인
    - pod
        - 쿠버네티스의 가장 작은 object 단위
        - 하나 이상의 컨테이너를 포함
        - 고유의 사설 ip를 할당 받아서 사용
        - pod 내의 컨테이너는 pod의 ip를 공유해서 사용
        - 필수 컨테이너는 side car 형태로 각 pod에 동시 배포 가능
- workload 생성을 위한 기본 컨셉
    - pod : 쿠버네티스 내에서 정의되는 가장 작은 단위의 워크로드 혹은 관리 리소스
    - ReplicaSet : Selector를 기반으로하여, Pod의 스케줄, 스케일링, 삭제를 담당
    - Deployment : Pod와 ReplicaSet에 대한 선언적 관리 방법
- 쿠버네티스 configuration
    - Imperative 명령형
        - 무언가를 작업하기 위한 방법을 정의하는 것
        - run, create, expose, edit, delete 등
    - Declarative 선언형
        - 무언가를 작업하기 위하여 어떻게 진행할 것인지를 나열하는 것
        - Desired State를 YAML로 정의하고 실행
- 쿠버네티스 Control Loop
    - 관찰 → 비교 → 실행 → 관찰 → 비교 → 실행 → …..
- 쿠버네티스 yaml
    - apiVersion
    - kind
    - metadata
    - annotations
    - label
    - spec
    - selector
    - template

---

## 간단 정리

- CDK란 ?
    - Cloud Development Kit
    - 프로그래밍 언어를 사용하여 클라우드 애플리케이션 리소스를 모델링 및 프로비저닝 해주는 도구
- Cluster란 ?
    - 서버 클러스트란 각기 다른 서버들을 하나로 묶어서 하나의 시스템같이 동작하게 함으로써, 클라이언트들에게 고가용성의 서비스를 제공하는 것을 말한다. 클러스터로 묶인 한시스템에 장애가 발생하면, 정보의 제공 포인트는 클러스터로 묶인 다른 정상적인 서버로 이동한다. 서버클러스터는 사용자로 하여금 서버기반 정보를 지속적이고, 끊기지않게 제공받을 수 있게 한다.
- Provisioning이란?
    - IT 인프라를 설정하는 프로세스, 또한 사용자와 시스템에서 사용할 수 있도록, 데이터와 리소스에 대한 액세스를 관리하는 데 필요한 단계를 지칭하기도 함
    - 프로비저닝과 설정은 각기 다른 작업이지만, 둘 다 배포 프로세스의 단계에 포함되며 일단 프로비저닝이 완료되어야 설정 단계를 진행할 수 있음
    - 영어를 직역한 의미는 제공하는것
    - 어떤 종류의 서비스든 사용자의 요구에 맞게 시스템 자체를 제공 하는 것을 프로비저닝이라고 하며 제공해줄 수 있는 것은 인프라 자원이나 서비스, 또는 장비가 될 수 도 있다.
- iptables 란?
    - 시스템 관리자가 리눅스 커널 방화벽이 제공하는 테이블들과 그것을 저장하는 체인, 규칙들을 구성할 수 있게 해주는 사용자 공간 응용 프로그램이다.
    - 간단하게 방화벽 소프트웨어
- sidecar pattern
    - 사이드카 패턴은 어플리케이션 컨테이너와 독립적으로 동작하는 별도의 컨테이너를 붙이는 패턴
    - [https://blog.leocat.kr/notes/2019/02/16/cloud-sidecar-pattern](https://blog.leocat.kr/notes/2019/02/16/cloud-sidecar-pattern)
- overlay 네트워크
    - 물리 네트워크 위에 성립되는 가상의 컴퓨터 네트워크이다. 이 오버레이 네트워크 안의 노드는 가상, 논리 링크로 연결될 수 있으며, 각 링크는 네트워크 안에서 많은 물리적 링크를 통하지만 물리적 링크를 고려하지는 않는다. 이를테면, P2P 네트워크는 오버레이 네트워크라고 할 수 있다. 이는 물리적으로 전달망을 고려하지 않고 peer와 peer간의 연결만을 고려하기 떄문이다. 전화 접속 인터넷은 전화망 위의 오버레이이다.
    - [https://post.naver.com/viewer/postView.nhn?volumeNo=15242539&memberNo=19185109](https://post.naver.com/viewer/postView.nhn?volumeNo=15242539&memberNo=19185109)
    - [https://yadon079.github.io/2021/cs/overlay-network](https://yadon079.github.io/2021/cs/overlay-network)
- terraform
    - 코드형 인프라 툴
    - 선언적인 코딩 툴인 테라폼은 개발자가 HCL(HashiCorp Configuration Language)이라고 불리는 상위 레벨 구성 언어를 사용하여 애플리케이션 실행을 위해 원하는 엔드 상태 클라우드 또는 온프레미스 인프라를 기술하도록 합니다. 그런 다음 해당 엔드상태에 도달하기 위한 계획을 생성하고 인프라를 프로비저닝하기 위한 계획을 실행합니다.
        - [https://www.ibm.com/kr-ko/cloud/learn/terraform](https://www.ibm.com/kr-ko/cloud/learn/terraform)
    - 테라폼 튜토리얼
        - [https://www.44bits.io/ko/post/terraform_introduction_infrastrucute_as_code](https://www.44bits.io/ko/post/terraform_introduction_infrastrucute_as_code)

---
