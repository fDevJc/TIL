# 공부정리

- 토이프로젝트 화면 설계 ([Oven 사용](https://ovenapp.io/project/LN2711wq7C02yqFl3J86LiEHiFuycB39#izrjj))
- DDD 설계를 위한 Event Storming
    - [참고](https://tech.junhabaek.net/ddd-%EC%A0%84%EB%9E%B5%EC%A0%81-%EC%84%A4%EA%B3%84-event-storming-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%BB%A4%EB%A7%A8%EB%93%9C-%EC%99%B8%EB%B6%80%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%A1%ED%84%B0-23ea8af1f457)
    - EventStorming 구성요소
        - 액터, 커맨드, 애그리거트, 이벤트, 읽기모델
        - 액터(Actor)는 명령(Command)를 내립니다.
        - 명령은 애그리거트나 외부 시스템에 의해서 수행됩니다.
        - 애그리거트의 동작과, 외부 시스템의 동작의 결과로 이벤트가 생성
        - 이벤트의 결과는 읽기 모델에 영향을 준다.
        - 정책/리액션은 A이벤트가 발생하면 B커맨드를 트리거한다.
    1. 이벤트 정의하기
        - 이벤트 란 ?
            - 애그리거트 혹은 도메인 개념상 ‘발생한 일'을 의미. 사용자 스토리나 요구사항으로부터 발생할 만한 이벤트들을 추출
            - 흔히 read를 제외한 create,update,delete 이벤트들이 많으며, 외부 시스템에 의해서 발생한 이벤트의 경우에는 인증이 완료되었다와 같은 cud가 아닌 이벤트일 수도 있다.
                - read는 이벤트나 애그리거트보다는, 주로 cqrs 패턴의 리드 모델로 표현
        - 이벤트 표현방법
            - 이벤트 사이의 순차적 관계가 있는 경우 좌→우 배치
            - 동시에 발생하는 이벤트의 경우 상→하 배치
            - 과거형으로 표현
    2. 커맨드 정의하기
        - 커맨드 란 ?
            - 하나의 명령에 의해 여러 이벤트가 발생할 수 있다.
            - 명령이 수행된다고 반드시 이벤트가 발생하는 것은 아니다.
            - 명령은 액터에 의해 호출될 수도 있지만 정책에 의해 호출될 수도 있다.
        - 커맨드 표현방법
            - 이벤트를 발생시키는 명령을 현재형으로 정의
    3. 외부 시스템/외부 프로세스 찾기
        - 외부 시스템/외부 프로세스 란 ?
            - 이메일 발송, 알림 처리 등 일부 동작들은 직접 구현하지 않고 외부 시스템의 도움을 받을 수 있다.
        - 외부 시스템/외부 프로세스 표현방법
            - 일반적으로 커맨드에 의해 호출되고, 이벤트를 생성
    4. 액터
        - 액터 란 ?
            - 커맨드를 수행하는 역할
            - 하나의 커맨드는 여러 액터에 의해 수행될 수 있다. 하지만 그 액터들이 수행하는 명령이 성공적으로 완료되는 조건이나 발생하는 결과에 차이가 있다면 유의해야한다.
        - 액터 표현방법
            - 사용자 회원 등과 같이 단순하게 취급하지 않을 것을 권장
            - 판매자 구매자 등과 같이 역할이 도출될수 있다.
    5. 애그리거트
        - 애그리거트 란 ?
            - 하나의 단위로 여겨질 수 있는 도메인 객체들의 집합
            - 복잡한 도메인 객체들 사이의 관계를 조금 더 넓은 시야로 바라볼 수 있으며, 하나의 맥락에서 지켜져야 하는 제약사항들을 관리 할 수 있게 됩니다.
        - 애그리거트 표현방법
            - 애그리거트는 커맨드와 이벤트 사이에 배치해줌.
        - 애그리거트는 가능하면 작게 구성한 뒤 제약 조건이 발생한다면 엔티티로 편입
        - 애그리거트가 다른 애그리거트를 생성하는 것은 매우 강력한 의존성을 가질 수 있음
        - 애그리거트는 커맨드가 수행되는 곳이면서 외부 시스템과 경쟁 관계에 있는 요소
- [https://tech.junhabaek.net/ddd-전략적-설계-eventstorming-애그리거트-event-grouping-b9188b1b7665](https://tech.junhabaek.net/ddd-%EC%A0%84%EB%9E%B5%EC%A0%81-%EC%84%A4%EA%B3%84-eventstorming-%EC%95%A0%EA%B7%B8%EB%A6%AC%EA%B1%B0%ED%8A%B8-event-grouping-b9188b1b7665)

---

- invariants : DDD에서 애그리거트 내에 속한 요소들은 무결성을 보장하기 위해, 긴밀하게 연관되어 있는경우가 많다. 이때 이 연관관계 혹은 제약조건을 invariants(불변식)이라한다.
- [‘information expert’ 패턴](https://en.wikipedia.org/wiki/GRASP_(object-oriented_design)#Information_expert)
- @Mapper
- [apidocs](https://github.com/Junh-b/spring-apidocs-practice)

---

# 😎 어제의 나 보다 한걸음 오늘의 나

- 😅 오전, 오후, 저녁 : msa 설계관련해서 자료를 찾던중 event storming 관련 포스팅을 찾아 공부
애그리게이트에 대해 개념이 안잡혀서 DDD START! 책 다시 독서
- 해당 포스팅 및 관련 개념을 잡고 토이프로젝트에 해당 포스팅 문서들을 적용시켜봐야겠다.
