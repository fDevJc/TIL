# 무중단배포

- 무중단 배포란?
    - 말그대로 중단이 없는 배포
- 무중단 배포 구현 방식
    - AWS Blue-Green 무중단 배포
    - 도커를 이용한 무중단 배포
    - L4, L7 스위치를 이용한 무중단 배포
    - Nginx를 이용한 무중단 배포
- 무중단 배포 전략
    - Rolling 배포
        - 트래픽을 점진적으로 구버전에서 새로운 버전으로 옮기는 방식
        - 장점
            - 많은 오케스트레이션 도구에서 지원
            - 많은 서버 자원을 확보하지 않아도 무중단 배포가 가능
            - 새로운 버전이 점진적으로 배포되므로 배포로 인한 위험성이 다소 줄어들 수 있다.
        - 단점
            - 구버전과 신버전의 어플리케이션이 동시에 서비스되기 때문에 호환성 문제가 발생할 수 있다.
    - Canary 배포
        - 점진적으로 구버전에 대한 트래픽을 신버전으로 옮기는 것은 롤링 배포 방식과 비슷 다만 카나리 배포의 핵심은 새로운 버전에 대한 오류를 조기에 감지
        - 장점
            - 새로운 버전으로 인한 위험을 최소화
        - 단점
            - 롤링 배포와 마찬가지로 새로운 버전과 구버전의 호환성 문제가 발생할 수 있다.
    - Blue/Green 배포
        - 트래픽을 한번에 구버전에서 신버전으로 옮기는 방법이다.
        - 현재 운영중인 서비스의 환경을 Blue라고 부르고, 새롭게 배포할 환경을 Green이라고 부른다
        - Blue와 Green의 서버를 동시에 나란히 구성해둔 상태로 배포 시점에 로드 밸런서가 트래픽을 Blue에서 Green으로 일제히 전환시킨다. Green 버전배포가 성공적으로 완료 되었고, 문제가 없다고 판단했을때에는 Blue 서버를 제거할 수 있다. 호긍ㄴ 다음 배포를 위해 유지해둘수 있다.
        - 장점
            - 롤링 배포와 달리 한번에 트래픽을 새로운 버전으로 옮기기에 호환성 문제가 발생하지 않는다.
        - 단점
            - 서버 리소스대비 2배의 리소스를 확보해야한다.