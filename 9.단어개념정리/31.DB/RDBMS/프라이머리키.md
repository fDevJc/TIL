# 프라이머리 키와 클러스터링 테이블
## 프라이머리 키의 특성
PK가 레코드의 저장위치를 결정

PK는 not null, unique의 특성을 갖는다

MySQL은 PK를 기준으로 유사한 값들이 함께 조회되는 경우가 많다는 점에서 착안, PK가 유사한 레코드를 묶어서 저장

유사한것들을 묶는 것을 클러스터링이라고 하는데 PK를 클러스터 인덱스로 부름

그 외 일반적인 인덱스는 논클러스터 인덱스라고 불림

## 페이지란
페이지란 디스크와 버퍼풀에 데이터를 읽고 쓰는 최소 작업 단위

일반적인 인덱스를 포함해 PK와 테이블 등은 모두 페이지 단위로 관리

1개의 레코드를 읽고 싶더라도 결국은 하나의 블록(페이지)을 읽어야 하는 것

페이지에 저장되는 개별 데이터의 크기를 최대한 적게 하여, 1개의 페이지에 많은 데이터를 저장할 수 있도록 하는 것이 상당히 중요

페이지가 클수록 디스크I/O가 많아지고, 메모리에 캐싱할 수 있는 데이터의 수가 줄어들 수 있다

레코드 건수가 많아서 하나의 페이지만으로 처리가 안된다면 여러 페이지를 읽어야한다.

이는 추가 디스크 읽기 작업을 의미하며 성능이 떨어지게된다.

데이터베이스 성능 개선 혹은 쿼리 튜닝은 디스크 I/O 자체를 줄이는 것이 핵심인 경우가 많다.

## 클러스터링 테이블의 저장 방식
클러스터링 테이블이란 클러스터 인덱스를 갖는 테이블

MySQL에서는 기본적으로 PK가 클러스터 인덱스이며, PK가 없다면 내부적으로 PK를 만들어 모든 테이블이 클러스터링 테이블이라 할 수 있다.

## 클러스터 인덱스의 장점과 단점
장점
- PK로 검색할 때 처리가 매우 빠름
- 연속되는 PK로 조회할 경우 랜덤 I/O가 아닌 순차 I/O를 사용하여 처리 속도가 더욱 빠름
- 인덱스가 PK값을 가지므로 인덱스로 PK 값만 조회하는 경우 효율적으로 처리될 수 있음(=커버링 인덱스)
> 커버링 인덱스? 쿼리를 충족하는데 필요한 모든 데이터를 갖는 인덱스를 뜻한다.

단점
- 모든 인덱스가 PK에 의존하므로 PK 값이 클 경우 전체적으로 인덱스의 크기가 커지고, 페이지 양이 많아짐
- 인덱스를 통해 검색할 때 PK로 다시 한번 검색해야 하므로 처리 성능이 느림
- INSERT 시에 PK에 의해 레코드의 저장 위치가 결정되기 때문에 처리 성능이 느림
- PK를 변경할 때 레코드를 DELETE 및 INSERT 해야 하므로 처리 성능이 느림