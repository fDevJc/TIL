## MSA란?

MicroService Architecture의 약자로 단일 프로그램을 작은 서비스의 조합으로 구축하는 방법입니다.

각각의 서비스는 느슨한 결합으로 다른 서비스에 대한 의존성이 최소화 되어야 하며, 각각의 서비스는 독립적으로 빌드,배포가 가능해야합니다.

각 서비스는 개별 프로세스로 구동되며, REST와 같은 가벼운방식의 통신방법이나, kafka 같은 메시지 스트림을 이용하여 통신됩니다.

## MSA가 등장한 이유

MSA가 등장하기 이전에는 대부분 모놀리스 방식으로 개발이 되었습니다.

모놀리스란 하나의 거대한 단일 프로그램으로 시스템을 구축하는 것입니다.

작은 규모 프로그램의 경우 하나의 단일 프로그램으로 구축할때 더 효율적이지만 현대의 시스템이 점점 거대해질수록 모놀리스 방식은 한계를 보이게 됩니다.

시스템이 커지면서 각 서비스의 영향도 파악 및 전체 시스템 구조를 파악하기 어렵고 시스템이 커질수록 빌드시간, 테스트시간, 배포시간이 기하급수적으로 늘어나게 됩니다. 그리고 최근 대용량의 트래픽으로 인한 해결책으로 시스템의 스케일아웃을 하게 되는데 이때에도 부분적으로 서비스를 스케일아웃하기 힘들게 됩니다. 그리고 부분의 장애가 시스템전체의 장애로 이어지는 경우가 많이 발생하게 됩니다.

이렇게 시스템이 거대해지면서 하나의 거대한 모놀리스 방식이 아닌 작은 서비스로 나누어 개발하는 MSA가 필요로 하게되었습니다.

## MSA의 장점
MSA는 모놀리스방식의 단점을 해결할 수 있습니다.

배포관점에서 MSA는 하나의 작은 서비스별로 개별 배포가 가능합니다. 배포단위가 작기때문에 빌드시간, 테스트시간, 배포시간이 모놀리스방식과 비교하여 줄어들게 됩니다.

확장관점에서 보면 MSA의 경우 트래픽이 몰릴것으로 예상되는 특정 서비스의 스케일아웃이 가능합니다. 전체 시스템을 스케일아웃 할때보다 자원을 더 아낄수 있어 비용측면에서도 장점이 있습니다.

장애관점에서 보면 하나의 서비스의 장애가 전체 시스템의 장애에 미치는 영향이 모놀리스보다 적습니다. 예를 들어 댓글 서비스에 장애가 발생할경우 댓글서비스는 이용을 할 수 없지만 로그인, 게시판조회등의 전체 서비스는 이용을 할 수 있습니다. 하지만 MSA에서도 하나의 서비스의 장애가 전파되는 것을 막기위해 노력해야합니다.

## MSA의 단점
물론 MSA에도 장점만 존재하는 것은 아닙니다.

MSA는 각 서비스간 통신을 해야하기에 모놀리스 구조보다 네트워크IO와 관련된 오버헤드가 발생하여 퍼포먼스에 대한 이슈가 발생할 수 있습니다. 그리고 모놀리스의 경우 보통 하나의 RDBMS를 이용하여 트랜잭션을 사용하기에 트랜잭션을 구현하는데 어려움이 없지만 MSA경우 다양한 서비스에서 다양한 RDBMS, NOSQL 등을 사용할 수 있기에 트랜잭션에 대해 더욱 신경써야하는 점이 있습니다.

## 문제 해결방법
MSA를 문제없이 구축하기 위해서 트랜잭션관리, 장애전파를 신경써서 설계해야합니다.